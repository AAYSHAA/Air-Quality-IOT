<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90680653-2"></script>
  <!-- Include the html2canvas library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-90680653-2');
  </script>
  
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Meta -->
  <meta name="description" content="Responsive Bootstrap 4 Dashboard Template">
  <meta name="author" content="BootstrapDash">

  <title>Raw data</title>
  <style>
    .chart-container {
      position: relative;
      margin: auto;
      height: 60vh;
      width: 80vw;
    }
    .chart-legend {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .chart-legend span {
      display: inline-block;
      margin-right: 15px;
      padding: 5px 10px;
      border-radius: 5px;
      color: #fff;
    }

  </style>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- vendor css -->
  <link href="../lib/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="../lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <link href="../lib/typicons.font/typicons.css" rel="stylesheet">

  <!-- azia CSS -->
  <link rel="stylesheet" href="../css/azia.css">
</head>

<body class="az-body">

  <div class="az-header">
    <div class="container">
      <div class="az-header-left">
        <a href="index.html" class="az-logo"><span></span> AirQuality</a>
        
      </div><!-- az-header-left -->

      <div class="az-header-menu">
        <div class="az-header-menu-header">
          <a href="index.html" class="az-logo"><span></span> airquality</a>
          <a href="" class="close">&times;</a>
        </div><!-- az-header-menu-header -->
        
      
      </div><!-- az-header-menu -->
 

  
        </div>
      </div><!-- az-header-right -->
    </div><!-- container -->
  </div><!-- az-header -->

  <div class="az-content az-content-dashboard">
    <div class="container">
      <div class="az-content-body">
        <div class="az-dashboard-one-title">
          <div>
            <h2 class="az-dashboard-title">Hi, welcome back!</h2>
            <p class="az-dashboard-text">Your Air quality Systems data are shown here!</p>
          </div>

          <div class="az-content-header-right">
            <div class="media">
            <div class="media-body">
              <label>Date</label>
              <h6 id="startDate"></h6>
            </div><!-- media-body -->
            </div><!-- media -->

            <div class="media">
              <div class="media-body">
                <label>Time</label>
                <h6 id="currentTime"></h6>
              </div><!-- media-body -->
              </div><!-- media -->
              <script>
                function updateTime() {
                  const now = new Date();
                  const timeString = now.toLocaleTimeString();
                  document.getElementById('currentTime').innerText = timeString;
                }

                // Update the time every second
                setInterval(updateTime, 1000);

                // Initial call to display the time immediately on page load
                updateTime();
              </script>



            <!-- <a href="" class="btn btn-purple">Export</a> -->
          </div>
        </div><!-- az-dashboard-one-title -->

        <div class="az-dashboard-nav"> 
          <nav class="nav">
            <a class="nav-link" href="index.html">Location Geo-graphics</a>
            <a class="nav-link active" href="page-signin.html">Overview</a>
          </nav>

          <nav class="nav">
            <!-- <a class="nav-link" href="#"><i class="far fa-save"></i> Save Report</a> -->
            <a class="nav-link" href="#" id="saveReportBtn"><i class="far fa-save"></i> Save Report</a>
            
            <!-- <a class="nav-link" href="#"><i class="far fa-file-pdf"></i> Export to PDF</a>
            <a class="nav-link" href="#"><i class="far fa-envelope"></i>Send to Email</a> -->
            <a class="nav-link" href="#"><i class="fas fa-ellipsis-h"></i></a>
          </nav>
          
        </div>

  <div class = "card-body row">
    <div class="row row-sm mg-b-20 mg-lg-b-0">
      <h6 class="text-center mb-4"><strong>Air Quality Metrics</strong></h6>
    <div class="container mt-5">    
      <div style="width: 100%; text-align: center;">
        <div style="display: flex; justify-content: center;">
          <canvas id="airQualityChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="card-body row">
    <div class="row row-sm mg-b-20 mg-lg-b-0">
      <div class="col-12">
        <div class="card card-table-one" style="width: 100%; margin: 0 auto;">
          <h6 class="card-title">Live Sensor Data Tracking & Analytics</h6>
          <p class="az-content-text mg-b-20">This chart provides real-time environmental data for the selected area, tracking air quality, temperature, humidity, and particulate matter. Its intuitive design allows users to easily monitor trends and access detailed insights on any device anywhere in your bank.</p>
          
          <div class="table-responsive">
            <div class="input-group mb-3">
              <input type="text" class="form-control" id="searchInput" onkeyup="searchTable()" placeholder="Search for cities...">
              <div class="input-group-append">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
              </div>
            </div>
            <table class="table table-striped table-hover">
              <thead class="thead-dark">
                <tr>
                  <th class="wd-45p" style="padding: 15px;">City</th>
                  <th style="padding: 15px;">Relative Humidity (RH)</th>
                  <th style="padding: 15px;">Total Volatile Organic Compounds (TVOC)</th>
                  <th style="padding: 15px;">CO2 (ppm)</th>
                  <th style="padding: 15px;">Air Quality Index</th>
                  <th style="padding: 15px;">CO (mg/m³)</th>
                  <th style="padding: 15px;">PM2.5 (µ/m³)</th>
                  <th style="padding: 15px;">PM10 (µ/m³)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding: 15px;"><strong>Colombo</strong></td>
                  <td style="padding: 15px;">65%</td>
                  <td style="padding: 15px;">600 µg/m³</td>
                  <td style="padding: 15px;">420 ppm</td>
                  <td style="padding: 15px;">55</td>
                  <td style="padding: 15px;">0.6</td>
                  <td style="padding: 15px;">30</td>
                  <td style="padding: 15px;">25</td>
                </tr>
                <tr>
                  <td style="padding: 15px;"><strong>Galle</strong></td>
                  <td style="padding: 15px;">70%</td>
                  <td style="padding: 15px;">500 µg/m³</td>
                  <td style="padding: 15px;">360 ppm</td>
                  <td style="padding: 15px;">45</td>
                  <td style="padding: 15px;">0.5</td>
                  <td style="padding: 15px;">25</td>
                  <td style="padding: 15px;">20</td>
                </tr>
                <tr>
                  <td style="padding: 15px;"><strong>Kandy</strong></td>
                  <td style="padding: 15px;">80%</td>
                  <td style="padding: 15px;">550 µg/m³</td>
                  <td style="padding: 15px;">400 ppm</td>
                  <td style="padding: 15px;">60</td>
                  <td style="padding: 15px;">0.7</td>
                  <td style="padding: 15px;">28</td>
                  <td style="padding: 15px;">22</td>
                </tr>
                <tr>
                  <td style="padding: 15px;"><strong>Nuwara Eliya</strong></td>
                  <td style="padding: 15px;">75%</td>
                  <td style="padding: 15px;">450 µg/m³</td>
                  <td style="padding: 15px;">340 ppm</td>
                  <td style="padding: 15px;">50</td>
                  <td style="padding: 15px;">0.3</td>
                  <td style="padding: 15px;">15</td>
                  <td style="padding: 15px;">18</td>
                </tr>
                <tr>
                  <td style="padding: 15px;"><strong>Jaffna</strong></td>
                  <td style="padding: 15px;">60%</td>
                  <td style="padding: 15px;">520 µg/m³</td>
                  <td style="padding: 15px;">380 ppm</td>
                  <td style="padding: 15px;">40</td>
                  <td style="padding: 15px;">0.4</td>
                  <td style="padding: 15px;">20</td>
                  <td style="padding: 15px;">15</td>
                </tr>
                <tr>
                  <td style="padding: 15px;"><strong>Negombo</strong></td>
                  <td style="padding: 15px;">68%</td>
                  <td style="padding: 15px;">470 µg/m³</td>
                  <td style="padding: 15px;">390 ppm</td>
                  <td style="padding: 15px;">35</td>
                  <td style="padding: 15px;">0.3</td>
                  <td style="padding: 15px;">18</td>
                  <td style="padding: 15px;">17</td>
                </tr>
              </tbody>
            </table>
          </div><!-- table-responsive -->
        </div><!-- card -->
      </div><!-- col-12 -->
    </div><!-- row -->
  </div><!-- card-body row -->
  <div class="az-footer ht-40">
    <div class="container ht-100p pd-t-0-f">
      <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright ©Amana Bank PLC.</span>
      <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> Made by <a href="https://www.amanabank.lk/" target="_blank">Qube.LK</a> @Amana Bank - IT Department </span>
    </div><!-- container -->
  </div><!-- az-footer -->
  
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Chart.js Script -->
  <script src="../lib/jquery/jquery.min.js"></script>
  <script src="../lib/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../lib/ionicons/ionicons.js"></script>
  <script src="../js/jquery.cookie.js" type="text/javascript"></script>
  <script src="../js/azia.js"></script>
  <script>
      // search in the table 
      function searchTable() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toLowerCase();
        const table = document.querySelector('.table tbody');
        const rows = table.getElementsByTagName('tr');

        for (let i = 0; i < rows.length; i++) {
            const cells = rows[i].getElementsByTagName('td');
            const cityName = cells[1].textContent.toLowerCase();

            if (cityName.indexOf(filter) > -1) {
                rows[i].style.display = '';
            } else {
                rows[i].style.display = 'none';
            }
        }
    }

     const ctx = document.getElementById('airQualityChart').getContext('2d');
    const airQualityChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Colombo', 'Jaffna', 'Nuwera-eliya', 'Kandy', 'Mannar', 'Trinco', 'Matale'], // Example months, replace with your data points
            datasets: [
                {
                    label: 'Relative Humidity (RH)',
                    data: [45, 50, 52, 60, 55, 65, 70], // Sample data, replace with real data
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'Total Volatile Organic Compounds (TVOC)',
                    data: [300, 320, 310, 400, 390, 420, 450], // Replace with actual values
                    borderColor: 'rgba(153, 102, 255, 1)',
                    backgroundColor: 'rgba(153, 102, 255, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'CO2 (Equivalent)',
                    data: [600, 620, 640, 700, 690, 710, 750],
                    borderColor: 'rgba(255, 159, 64, 1)',
                    backgroundColor: 'rgba(255, 159, 64, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'Air Quality Index (AQI)',
                    data: [50, 55, 60, 70, 65, 75, 80],
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'CO (Carbon monoxide)',
                    data: [0.4, 0.3, 0.5, 0.6, 0.7, 0.5, 0.8],
                    borderColor: 'rgba(54, 162, 235, 1)',
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'PM2.5 (µg/m³)',
                    data: [15, 18, 20, 25, 22, 26, 30],
                    borderColor: 'rgba(255, 206, 86, 1)',
                    backgroundColor: 'rgba(255, 206, 86, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'PM10 (µg/m³)',
                    data: [30, 35, 40, 45, 50, 55, 60],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
    $(function(){
      'use strict'
    });

    // implement save report method
    document.getElementById('saveReportBtn').addEventListener('click', function() {
    // Use html2canvas to take a screenshot of the entire webpage
    html2canvas(document.body).then(function(canvas) {
      // Create a download link
      var link = document.createElement('a');
      link.href = canvas.toDataURL('image/png');
      link.download = 'webpage-screenshot.png';  // File name for the download
      
      // Automatically click the link to trigger download
      link.click();
    });
  });

    // Get date
    document.getElementById('startDate').innerText = new Date().toLocaleDateString();
  </script>
</body>
</html>
